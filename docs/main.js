var m=class{static setP5(t){m._p5=t}static getP5(){return m._p5}},L=m.getP5,h=m;var f,g=class{constructor(t,e){f=h.getP5(),this.position=f.createVector(t,e),this.size=s.CELL_SIZE}update(){}show(){f.fill("red"),f.rect(this.position.x,this.position.y,this.size,this.size)}},w=g;var r,y=class{constructor(){r=h.getP5(),this.rows=s.HEIGHT/s.CELL_SIZE,this.columns=s.WIDTH/s.CELL_SIZE,r.print(`Grid: ${this.rows}x${this.columns}`)}getRandomPosition(){let t=r.floor(r.random(1,this.rows)),e=r.floor(r.random(1,this.columns)),o=t*s.CELL_SIZE,n=e*s.CELL_SIZE;return r.createVector(o,n)}show(){r.fill("white"),r.rect(0,0,s.WIDTH,s.HEIGHT);for(let t=1;t<this.columns;t++){let e=s.CELL_SIZE*t,o=0,n=s.HEIGHT;r.line(e,o,e,n)}for(let t=1;t<this.rows;t++){let e=s.CELL_SIZE*t,o=0,n=s.WIDTH;r.line(o,e,n,e)}}},E=y;var i,I=class{constructor(t,e,o){this.maxFramesToMove=2,i=h.getP5(),this.framesToMove=5,this.speed=s.CELL_SIZE,this.velocity=i.createVector(this.speed,0),this.size=o,this.body=[];for(let n=0;n<this.size;n++){let d=t+n*s.CELL_SIZE,l=i.createVector(d,e);this.body.push(l)}}update(){this.checkInput(),this.updatePosition(),this.checkBoundaries()}getHead(){return this.body[0]}checkInput(){let t=this.velocity.copy();i.keyCode==i.UP_ARROW&&(t=i.createVector(0,-this.speed)),i.keyCode==i.DOWN_ARROW&&(t=i.createVector(0,this.speed)),i.keyCode==i.LEFT_ARROW&&(t=i.createVector(-this.speed,0)),i.keyCode==i.RIGHT_ARROW&&(t=i.createVector(this.speed,0)),!(-t.x==this.velocity.x||-t.y==this.velocity.y)&&(this.velocity=t)}updatePosition(){if(i.frameCount%this.framesToMove==0){let t=this.getHead().copy().add(this.velocity);this.body.length!=this.size||this.body.pop(),this.body.unshift(t)}}checkBoundaries(){let t=this.getHead();if(t.x==s.WIDTH){t.x=0;return}if(t.y==s.HEIGHT){t.y=0;return}if(t.x<0){t.x=s.WIDTH-s.CELL_SIZE;return}if(t.y<0){t.y=s.HEIGHT-s.CELL_SIZE;return}}grow(){this.size++,this.framesToMove>this.maxFramesToMove&&this.framesToMove--}show(){i.fill("green");for(let t=0;t<this.body.length;t++){let{x:e,y:o}=this.body[t];i.rect(e,o,s.CELL_SIZE,s.CELL_SIZE)}}},T=I;var a,p=class{constructor(){this._logX=15,a=h.getP5(),this.score=0,this.playTimeInMs=0,this.grid=new E,this.spawnSnake(),this.spawnFood(),this.pDebug=a.select("#debug"),this.pScore=a.select("#score"),this.pTime=a.select("#time")}spawnSnake(){let{x:t,y:e}=this.grid.getRandomPosition(),o=3;this.snake=new T(t,e,o)}spawnFood(){let{x:t,y:e}=this.snake.getHead(),o,n,d,l=1;do if({x:o,y:n}=this.grid.getRandomPosition(),d=o==t&&n==e,l++,l>100)throw new Error("The food is in the way! Too much recursion.");while(d);this.food=new w(o,n)}snakeIsEating(){let{x:t,y:e}=this.snake.getHead(),{x:o,y:n}=this.food.position;return a.dist(t,e,o,n)==0}update(){this.snake.update(),this.snakeIsEating()&&(this.score++,this.snake.grow(),this.spawnFood())}show(){this._logY=this._logX,a.background(220),this.grid.show(),this.snake.show(),this.food.show(),this.showTime(),this.showScore()}showScore(){this.pScore.html(`Score: ${this.score}`)}showDebug(){let{x:t,y:e}=this.snake.getHead();this.pDebug.html(`Position: ${t},${e}`)}showTime(){this.playTimeInMs+=a.deltaTime;let t=new Date(0,0,0,0,0,0,0);t.setMilliseconds(this.playTimeInMs);let e=k=>String(k).padStart(2,"0"),o=e(t.getHours()),n=e(t.getMinutes()),d=e(t.getSeconds()),l=`${o}:${n}:${d}`;this.pTime.html(`Time: ${l}`)}print(t){a.fill("black"),a.text(t,this._logX,this._logY),this._logY+=this._logY}};p.WIDTH=500;p.HEIGHT=500;p.CELL_SIZE=25;var s=p;var u,S=c=>{c.setup=()=>{h.setP5(c),c.createCanvas(s.WIDTH,s.HEIGHT),c.background(220),u=new s},c.draw=()=>{u.update(),u.show()}};new p5(S,document.querySelector("#game"));console.log("main");
//# sourceMappingURL=main.js.map
